import{_ as a,c as n,ag as t,o as e}from"./chunks/framework.qSHG2lgv.js";const u=JSON.parse('{"title":"Sandbox","description":"","frontmatter":{},"headers":[],"relativePath":"sandbox.md","filePath":"sandbox.md"}'),i={name:"sandbox.md"};function o(p,s,l,d,c,h){return e(),n("div",null,s[0]||(s[0]=[t(`<h1 id="sandbox" tabindex="-1">Sandbox <a class="header-anchor" href="#sandbox" aria-label="Permalink to &quot;Sandbox&quot;">​</a></h1><p>The Jstz sandbox is a local environment that you can use to develop and test smart functions. Its core features are:</p><ul><li>Low block time and commitment period</li><li>Pre-loaded bootstrap accounts</li><li>Pre-deployed native bridge</li><li>Centralized configuration between Jstz and Octez infrastructure</li></ul><p>::: note</p><p>The sandbox runs in a Docker container, so it persists only as long as you leave that container running.</p><p>:::</p><p>The sandbox includes:</p><ul><li>A simulated Tezos layer 1 environment, including an Octez node and bootstrap accounts that have tez</li><li>The layer 1 infrastructure that hosts the Jstz Smart Rollup</li><li>The <a href="/dev-docs/architecture/bridge.html">Asset bridge</a>, which allows you to bridge tez from the bootstrap accounts to Jstz smart functions and accounts</li><li>The Jstz environment itself, which runs smart functions and keeps track of Jstz accounts</li></ul><h2 id="running-the-sandbox" tabindex="-1">Running the sandbox <a class="header-anchor" href="#running-the-sandbox" aria-label="Permalink to &quot;Running the sandbox&quot;">​</a></h2><p>To start the sandbox, make sure that Docker is installed and then run this command to start the sandbox in a Docker container:</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">jstz</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> sandbox</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --container</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> start</span></span></code></pre></div><p>If you see an error that says that the configuration file is improperly configured, delete the <code>~/.config/jstz/</code> folder and try to start the sandbox again.</p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>The <code>--detach</code> (<code>-d</code>) flag starts the sandbox in the background, allowing you to continue working in the same terminal. You can stop or reset the sandbox with the commands <code>jstz sandbox --container stop</code> or <code>jstz sandbox --container restart</code>, but the state of the sandbox is not persistent.</p></div><p>If you see the following output, the sandbox is running:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span></span></span>
<span class="line"><span>           __________</span></span>
<span class="line"><span>           \\  jstz  /</span></span>
<span class="line"><span>            )______(</span></span>
<span class="line"><span>            |&quot;&quot;&quot;&quot;&quot;&quot;|_.-._,.---------.,_.-._</span></span>
<span class="line"><span>            |      | | |               | | &#39;&#39;-.</span></span>
<span class="line"><span>            |      |_| |_             _| |_..-&#39;</span></span>
<span class="line"><span>            |______| &#39;-&#39; \`&#39;---------&#39;\` &#39;-&#39;</span></span>
<span class="line"><span>            )&quot;&quot;&quot;&quot;&quot;&quot;(</span></span>
<span class="line"><span>           /________\\</span></span>
<span class="line"><span>           \`&#39;------&#39;\`</span></span>
<span class="line"><span>         .------------.</span></span>
<span class="line"><span>        /______________\\</span></span>
<span class="line"><span></span></span>
<span class="line"><span>        0.1.1-alpha.1 https://github.com/jstz-dev/jstz</span></span>
<span class="line"><span></span></span>
<span class="line"><span>  +---------------------------------------------------+---------------------+</span></span>
<span class="line"><span>  | Address                                           | XTZ Balance (mutez) |</span></span>
<span class="line"><span>  +===================================================+=====================+</span></span>
<span class="line"><span>  | (bootstrap0) tz1TGu6TN5GSez2ndXXeDX6LgUDvLzPLqgYV | 100000000000        |</span></span>
<span class="line"><span>  +---------------------------------------------------+---------------------+</span></span>
<span class="line"><span>  | (bootstrap1) tz1KqTpEZ7Yob7QbPE4Hy4Wo8fHG8LhKxZSx | 100000000000        |</span></span>
<span class="line"><span>  +---------------------------------------------------+---------------------+</span></span>
<span class="line"><span>  | (bootstrap2) tz1gjaF81ZRRvdzjobyfVNsAeSC6PScjfQwN | 100000000000        |</span></span>
<span class="line"><span>  +---------------------------------------------------+---------------------+</span></span>
<span class="line"><span>  | (bootstrap3) tz1faswCTDciRzE4oJ9jn2Vm2dvjeyA9fUzU | 100000000000        |</span></span>
<span class="line"><span>  +---------------------------------------------------+---------------------+</span></span>
<span class="line"><span>  | (bootstrap4) tz1b7tUupMgCNw2cCLpKTkSD1NZzB5TkP2sv | 100000000000        |</span></span>
<span class="line"><span>  +---------------------------------------------------+---------------------+</span></span>
<span class="line"><span>  | (bootstrap5) tz1ddb9NMYHZi5UzPdzTZMYQQZoMub195zgv | 100000000000        |</span></span>
<span class="line"><span>  +---------------------------------------------------+---------------------+</span></span></code></pre></div><p>When the sandbox starts, it shows the bootstrap accounts and their balances on Tezos layer 1, which you can use to fund smart functions and user accounts in Jstz. For example, this command bridges 1,000 tez from a layer 1 bootstrap account to a Jstz account with the address <code>tz1N8BsvfrSjGdomFi5V9RwwYLasgD8s4pxF</code>:</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">jstz</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> bridge</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> deposit</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> bootstrap1</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --to</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> tz1N8BsvfrSjGdomFi5V9RwwYLasgD8s4pxF</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --amount</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1000</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dev</span></span></code></pre></div><p>Then you can deploy and call smart functions in the sandbox.</p><h2 id="the-jstzd-daemon" tabindex="-1">The <code>jstzd</code> daemon <a class="header-anchor" href="#the-jstzd-daemon" aria-label="Permalink to &quot;The \`jstzd\` daemon&quot;">​</a></h2><p>The <code>jstzd</code> daemon orchestrates and manages the core components of the <code>jstz</code> local sandbox. It serves as the central coordinator for setting up the necessary infrastructure, such as the Jstz node and Octez binaries that run an instance of the Jstz kernel.</p><p>::: note</p><p>The <code>jstzd</code> daemon does not run a complete sandbox by itself. Running the sandbox without using the <code>jstz sandbox</code> command requires you to configure the Octez binaries for use with the daemon and to configure the Jstz CLI to use it.</p><p>:::</p><p>To start the daemon directly, run this command:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">jstzd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span></span></code></pre></div><p>By default, <code>jstzd</code> runs on port 54321. You can customize the configuration through a JSON configuration file. For example, if you want to start <code>jstzd</code> on port 54320 and the Octez node on port 3000, you can create a config.json file with the following content:</p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;server_port&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">54320</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;octez_node&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;rpc_endpoint&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;localhost:3000&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>Then start the daemon with this configuration by running this command:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">jstzd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> config.json</span></span></code></pre></div><h3 id="bootstrap-accounts" tabindex="-1">Bootstrap Accounts <a class="header-anchor" href="#bootstrap-accounts" aria-label="Permalink to &quot;Bootstrap Accounts&quot;">​</a></h3><p>Jstzd automatically sets up 6 bootstrap accounts with an initial balance of 100,000,000,000 mutez each:</p><ul><li><code>tz1TGu6TN5GSez2ndXXeDX6LgUDvLzPLqgYV</code> (bootstrap0)</li><li><code>tz1KqTpEZ7Yob7QbPE4Hy4Wo8fHG8LhKxZSx</code> (bootstrap1)</li><li><code>tz1gjaF81ZRRvdzjobyfVNsAeSC6PScjfQwN</code> (bootstrap2)</li><li><code>tz1faswCTDciRzE4oJ9jn2Vm2dvjeyA9fUzU</code> (bootstrap3)</li><li><code>tz1b7tUupMgCNw2cCLpKTkSD1NZzB5TkP2sv</code> (bootstrap4)</li><li><code>tz1ddb9NMYHZi5UzPdzTZMYQQZoMub195zgv</code> (bootstrap5)</li></ul><h3 id="api-endpoints" tabindex="-1">API Endpoints <a class="header-anchor" href="#api-endpoints" aria-label="Permalink to &quot;API Endpoints&quot;">​</a></h3><p>The <code>jstzd</code> daemon provides endpoints to monitor the health, retrieve the configuration of the running processes, and shut down the system:</p><ul><li><code>GET /health</code> - Returns 200 if the processes are running properly</li><li><code>GET /config/</code> - Get full system configuration</li><li><code>GET /config/:config_type</code> - Get specific component config (including the Jstz node and the Octez node)</li><li><code>PUT /shutdown</code> - Gracefully shut down the system</li></ul>`,35)]))}const k=a(i,[["render",o]]);export{u as __pageData,k as default};
