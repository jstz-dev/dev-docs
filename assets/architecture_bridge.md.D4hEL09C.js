import{_ as i,c as a,ag as t,o as e}from"./chunks/framework.qSHG2lgv.js";const c=JSON.parse('{"title":"üí∏ Asset Bridge","description":"","frontmatter":{},"headers":[],"relativePath":"architecture/bridge.md","filePath":"architecture/bridge.md"}'),n={name:"architecture/bridge.md"};function h(l,s,p,o,d,r){return e(),a("div",null,s[0]||(s[0]=[t(`<h1 id="üí∏-asset-bridge" tabindex="-1">üí∏ Asset Bridge <a class="header-anchor" href="#üí∏-asset-bridge" aria-label="Permalink to &quot;üí∏ Asset Bridge&quot;">‚Äã</a></h1><p><code>jstz</code> maintains a persistent ledger of all accounts and their balances of L2 tez (stored as mutez).</p><p>The <code>jstz</code> <em>bridge</em> implements a bridge protocol that allows to transfer tezos tokens from Tezos to the <code>jstz</code> rollup and back.</p><h2 id="quick-start" tabindex="-1">Quick Start <a class="header-anchor" href="#quick-start" aria-label="Permalink to &quot;Quick Start&quot;">‚Äã</a></h2><h3 id="deposit" tabindex="-1">Deposit <a class="header-anchor" href="#deposit" aria-label="Permalink to &quot;Deposit&quot;">‚Äã</a></h3><p>The <code>jstz</code> CLI empowers you to effortlessly transfer assets between a Tezos address (<code>tz1</code>) and a <code>jstz</code> L2 address (<code>tz1</code>) using the provided <code>bridge</code> commands.</p><p>To deposit assets from a Tezos address to a <code>jstz</code> L2 address, run the following command:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">jstz</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> bridge</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> deposit</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --from</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">TZ1_ADDRESS/ALIA</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">S</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --to</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">TZ1_ADDRESS/ALIA</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">S</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --amount</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">AMOUN</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">T</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span></code></pre></div><p>Replace <code>&lt;TZ1_ADDRESS/ALIAS&gt;</code> with the source Tezos address or alias (managed by <code>octez-client</code>), <code>&lt;TZ1_ADDRESS/ALIAS&gt;</code> with the destination <code>jstz</code> address, and <code>&lt;AMOUNT&gt;</code> with the quantity of XTZ to deposit.</p><p>For example, running:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">jstz</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> bridge</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> deposit</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> tz1faswCTDciRzE4oJ9jn2Vm2dvjeyA9fUzU</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    --to</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> tz1ZvXcDBWMAys2ro6kJXrgiWUcUF8RvCHYy</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    --amount</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 42</span></span></code></pre></div><p>successfully deposits 42 XTZ from <code>tz1faswCTDciRzE4oJ9jn2Vm2dvjeyA9fUzU</code> to the <code>tz1ZvXcDBWMAys2ro6kJXrgiWUcUF8RvCHYy</code> <code>jstz</code> address, outputting:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>Deposited 42 XTZ to tz4N7y3T2e2dfCyHB1Ama68jnt3Fps7Ufu6d</span></span></code></pre></div><h3 id="withdraw" tabindex="-1">Withdraw <a class="header-anchor" href="#withdraw" aria-label="Permalink to &quot;Withdraw&quot;">‚Äã</a></h3><div class="danger custom-block"><p class="custom-block-title">DANGER</p><p>‚ö†Ô∏è Withdrawals on <code>jstz</code> to Tezos is still a work in progress</p></div><p>To withdraw assets from <code>jstz</code> L2 address to a Tezos address, run the following command:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> jstz</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> bridge</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> withdraw</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --to</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">TZ1_ADDRESS/ALIA</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">S</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --amount</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">AMOUN</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">T</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span></code></pre></div><p>This will withdraw <code>&lt;AMOUNT&gt;</code>Íú© from the current logged in <code>jstz</code> account to <code>&lt;TZ1_ADDRESS/ALIAS&gt;</code> Tezos account</p><p>For example, running:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">jstz</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> bridge</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> withdraw</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --to</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> tz1faswCTDciRzE4oJ9jn2Vm2dvjeyA9fUzU</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    --amount</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 42</span></span></code></pre></div><p>will output the following response on success:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Running</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> function</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> at</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> jstz://jstz/withdraw</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Status</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> code:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 200</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> OK</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Headers:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> {}</span></span></code></pre></div><p>Communication from L2 and L1 within the Tezos ecosystem is performed through <a href="https://tezos.gitlab.io/shell/smart_rollup_node.html#triggering-the-execution-of-an-outbox-message" target="_blank" rel="noreferrer">outbox messages</a>. Use <a href="https://github.com/jstz-dev/jstz/blob/main/scripts/execute_latest_outbox_message.sh" target="_blank" rel="noreferrer">execute_latest_outbox_message</a> to execute the withdraw message.</p><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>‚ö†Ô∏è The following example will not work with <code>octez-client</code> in the Nix shell.</p></div><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Requires octez client binary as an argument</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">./scripts/execute_latest_outbox_message.sh</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> octez-client</span></span></code></pre></div><h2 id="how-it-works" tabindex="-1">How it Works? <a class="header-anchor" href="#how-it-works" aria-label="Permalink to &quot;How it Works?&quot;">‚Äã</a></h2><div class="danger custom-block"><p class="custom-block-title">DANGER</p><p>‚ö†Ô∏è Under construction ‚ö†Ô∏è</p></div>`,27)]))}const g=i(n,[["render",h]]);export{c as __pageData,g as default};
